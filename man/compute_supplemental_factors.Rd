% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/supplemental_protection_simulator.R
\name{compute_supplemental_factors}
\alias{compute_supplemental_factors}
\title{Compute supplemental policy factors (SCO/ECO)}
\usage{
compute_supplemental_factors(base_policy, adm, plan, subsidy, trigger)
}
\arguments{
\item{base_policy}{\link[data.table]{data.table}. Base-policy rows (keys,
yields, prices, liability, etc.).}

\item{adm}{\link[data.table]{data.table}. Rating inputs with
\code{base_rate} and join keys.}

\item{plan}{Integer. Plan code in the offering (e.g., 31-33, 51-53, 87-89).}

\item{subsidy}{Numeric. Subsidy factor (e.g., \code{0.65}, \code{0.80}, \code{0.44}).}

\item{trigger}{Numeric. Coverage trigger level (e.g., \code{0.86}, \code{0.90}, \code{0.95}).}
}
\value{
A \link[data.table]{data.table} with columns:
\code{commodity_year}, \code{state_code}, \code{county_code},
\code{commodity_code}, \code{type_code}, \code{practice_code},
\code{unit_structure_code}, \code{insurance_plan_code},
\code{coverage_level_percent}, \code{liability}, \code{total_premium},
\code{subsidy_amount}, \code{producer_premium}, \code{indemnity}, \code{sup}.
}
\description{
Compute shallow-loss protection, premiums, and indemnities for one SCO/ECO
endorsement offering, aligning plan families and joining ADM rating inputs.
}
\details{
Handles plan families via offsets (31-33, 41-43, 51-53, 87-89). For plans
87-89 (ECO), the \code{coverage_level_percent} for ADM is matched to the
\code{trigger} (with a small tolerance), and the subsidy factor special-case
is applied for underlying plan code 1. Emits a standard \code{sup} label
like \code{"SCO8665"} or \code{"ECO9544"}.
}
